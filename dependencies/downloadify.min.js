!function(){Downloadify=window.Downloadify={queue:{},uid:(new Date).getTime(),getTextForSave:function(e){var n=Downloadify.queue[e]
return n?n.getData():""},getFileNameForSave:function(e){var n=Downloadify.queue[e]
return n?n.getFilename():""},getDataTypeForSave:function(e){var n=Downloadify.queue[e]
return n?n.getDataType():""},getTextForCopy:function(e){var n=Downloadify.queue[e]
return n?n.getTextCopy():""},saveComplete:function(e){var n=Downloadify.queue[e]
return n&&n.complete(),!0},saveCancel:function(e){var n=Downloadify.queue[e]
return n&&n.cancel(),!0},saveError:function(e){var n=Downloadify.queue[e]
return n&&n.error(),!0},addToQueue:function(e){Downloadify.queue[e.queue_name]=e},getUID:function(e){return""==e.id&&(e.id="downloadify_"+Downloadify.uid++),e.id}},Downloadify.create=function(e,n){var o="string"==typeof e?document.getElementById(e):e
return new Downloadify.Container(o,n)},Downloadify.Container=function(e,n){var o=this
o.el=e,o.enabled=!0,o.dataCallback=null,o.filenameCallback=null,o.textcopyCallback=null,o.data=null,o.filename=null
var t=function(){o.options=n,o.options.append||(o.el.innerHTML=""),o.flashContainer=document.createElement("span"),o.el.appendChild(o.flashContainer),o.queue_name=Downloadify.getUID(o.flashContainer),"function"==typeof o.options.filename?o.filenameCallback=o.options.filename:o.options.filename&&(o.filename=o.options.filename),"function"==typeof o.options.data?o.dataCallback=o.options.data:o.options.data&&(o.data=o.options.data),"function"==typeof o.options.textcopy?o.textcopyCallback=o.options.textcopy:o.options.textcopy&&(o.textcopy=o.options.textcopy)
var e={queue_name:o.queue_name,width:o.options.width,height:o.options.height},t={allowScriptAccess:"always"},a={id:o.flashContainer.id,name:o.flashContainer.id}
o.options.enabled===!1&&(o.enabled=!1),o.options.transparent===!0&&(t.wmode="transparent"),o.options.downloadImage&&(e.downloadImage=o.options.downloadImage),swfobject.embedSWF(o.options.swf,o.flashContainer.id,o.options.width,o.options.height,"10",null,e,t,a),Downloadify.addToQueue(o)}
o.enable=function(){var e=document.getElementById(o.flashContainer.id)
e.setEnabled(!0),o.enabled=!0},o.disable=function(){var e=document.getElementById(o.flashContainer.id)
e.setEnabled(!1),o.enabled=!1},o.getData=function(){return o.enabled?o.dataCallback?o.dataCallback():o.data?o.data:"":""},o.getFilename=function(){return o.filenameCallback?o.filenameCallback():o.filename?o.filename:""},o.getDataType=function(){return o.options.dataType?o.options.dataType:"string"},o.getTextCopy=function(){return o.textcopyCallback?o.textcopyCallback():o.textcopy?o.textcopy:""},o.complete=function(){"function"==typeof o.options.onComplete&&o.options.onComplete()},o.cancel=function(){"function"==typeof o.options.onCancel&&o.options.onCancel()},o.error=function(){"function"==typeof o.options.onError&&o.options.onError()},t()},Downloadify.defaultOptions={swf:"media/downloadify.swf",downloadImage:"images/download.png",width:100,height:30,transparent:!0,append:!1,dataType:"string"}}(),"undefined"!=typeof jQuery&&!function(e){e.fn.downloadify=function(n){return this.each(function(){n=e.extend({},Downloadify.defaultOptions,n)
var o=Downloadify.create(this,n)
e(this).data("Downloadify",o)})}}(jQuery),"undefined"!=typeof MooTools&&Element.implement({downloadify:function(e){return e=$merge(Downloadify.defaultOptions,e),this.store("Downloadify",Downloadify.create(this,e))}})
